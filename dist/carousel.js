"use strict";var I=Object.defineProperty;var C=(l,n,h)=>n in l?I(l,n,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[n]=h;var s=(l,n,h)=>(C(l,typeof n!="symbol"?n+"":n,h),h);(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const l='s-carousel="wrapper"',n='s-carousel="root"',h='s-carousel="slide"',y='s-carousel="next"',E='s-carousel="prev"',T='s-carousel="dot"',L='s-carousel="pause"',m="s-threshold",u="s-active-class",d="s-dragging-class",c="s-disabled-class",g="s-paused-class",B="s-autoplay",v="s-duration",A="s-ease",f="s-loop",b="s-slides-to-scroll",x=document.querySelectorAll(`[${l}]`);class w{constructor(t){s(this,"wrapper");s(this,"root");s(this,"slides");s(this,"nextButton");s(this,"prevButton");s(this,"dots");s(this,"pauseButton");s(this,"isPaused");s(this,"autoplayInterval");s(this,"autoplayTimeoutId");s(this,"currentIndex");s(this,"dragging");s(this,"startX");s(this,"currentX");s(this,"dragX");s(this,"threshold");s(this,"activeClass");s(this,"draggingClass");s(this,"disabledClass");s(this,"pausedClass");s(this,"isEnabled");s(this,"xSetter");s(this,"xTo");s(this,"slidePositions");s(this,"duration");s(this,"ease");s(this,"loop");s(this,"resizeTimeout",null);s(this,"liveRegion");s(this,"slidesToScroll");s(this,"autoplayStartTime",null);s(this,"autoplayRemainingTime",null);s(this,"onDragStart",t=>{t.type==="touchstart"&&t.preventDefault(),this.dragging=!0,this.startX="touches"in t?t.touches[0].clientX:t.clientX,this.currentX=gsap.getProperty(this.root,"x"),this.wrapper.classList.add(this.draggingClass),this.autoplayInterval!==null&&!this.isPaused&&this.stopAutoplay()});s(this,"onDragMove",t=>{if(!this.dragging)return;const e="touches"in t?t.touches[0].clientX-this.startX:t.clientX-this.startX,i=this.currentX+e;this.dragX=e,this.xSetter(i)});s(this,"onDragEnd",()=>{if(!this.dragging)return;this.dragging=!1,this.wrapper.classList.remove(this.draggingClass);const t=this.slides[0].offsetWidth,e=Math.abs(this.dragX)/t;requestAnimationFrame(()=>{let i=this.currentIndex;if(e>this.threshold){const o=this.dragX>0?-1:1;i=Math.max(0,Math.min(this.slides.length-this.slidesToScroll,this.currentIndex+o))}i!==this.currentIndex&&(this.currentIndex=i,this.updateActiveStates(),this.loop||this.updateButtonStates()),this.goToSlide(i),this.dragX=0,this.autoplayInterval!==null&&this.isPaused&&this.startAutoplay()})});s(this,"goToNext",()=>{var t;((t=this.nextButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===this.slides.length-this.slidesToScroll?this.goToSlide(0):this.goToSlide(this.currentIndex+1))});s(this,"goToPrev",()=>{var t;((t=this.prevButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===0?this.goToSlide(this.slides.length-this.slidesToScroll):this.goToSlide(this.currentIndex-this.slidesToScroll))});s(this,"handleKeyDown",t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),this.goToPrev();break;case"ArrowRight":t.preventDefault(),this.goToNext();break}});s(this,"handleButtonKeydown",t=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.target.click())});s(this,"handleDotKeydown",(t,e)=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.goToSlide(e))});s(this,"togglePause",()=>{var t,e,i,o,a,r;this.isPaused=!this.isPaused,this.isPaused?(this.stopAutoplay(),(t=this.pauseButton)==null||t.setAttribute("aria-label","Play carousel"),(e=this.pauseButton)==null||e.setAttribute("aria-pressed","true"),(i=this.pauseButton)==null||i.classList.add(this.pausedClass)):(this.startAutoplay(),(o=this.pauseButton)==null||o.setAttribute("aria-label","Pause carousel"),(a=this.pauseButton)==null||a.setAttribute("aria-pressed","false"),(r=this.pauseButton)==null||r.classList.remove(this.pausedClass))});this.wrapper=t,this.root=t.querySelector(`[${n}]`),this.slides=Array.from(t.querySelectorAll(`[${h}]`)),this.nextButton=t.querySelector(`[${y}]`),this.prevButton=t.querySelector(`[${E}]`),this.pauseButton=t.querySelector(`[${L}]`),this.dots=[],this.currentIndex=0,this.dragging=!1,this.startX=0,this.currentX=0,this.dragX=0,this.threshold=.3,this.autoplayInterval=null,this.autoplayTimeoutId=null,this.activeClass=t.getAttribute(u)?t.getAttribute(u):"s-active",this.draggingClass=t.getAttribute(d)?t.getAttribute(d):"s-dragging",this.disabledClass=t.getAttribute(c)?t.getAttribute(c):"s-disabled",this.pausedClass=t.getAttribute(g)?t.getAttribute(g):"s-paused",this.isEnabled=!0,this.xSetter=gsap.quickSetter(this.root,"x","px"),this.duration=t.getAttribute(v)?parseFloat(t.getAttribute(v)):.5,this.ease=t.getAttribute(A)?t.getAttribute(A):"power2.out",this.xTo=this.createQuickTo(),this.slidePositions=[],this.loop=t.getAttribute(f)?t.getAttribute(f)==="true":!1,this.liveRegion=this.createLiveRegion(),this.isPaused=!1,this.slidesToScroll=t.getAttribute(b)?parseInt(t.getAttribute(b)):1,this.handleResize=this.handleResize.bind(this),this.init()}createQuickTo(){let t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease});return e=>{t(e),t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease})}}init(){this.setupOptions(),this.calculateSlidePositions(),this.createDots(),this.updateActiveStates(),this.setupPauseButton(),this.autoplayInterval!==null&&this.isEnabled&&(this.startAutoplay(),this.loop=!0),this.updateButtonStates(),this.addEventListeners(),this.setupKeyboardNavigation(),this.updateAriaAttributes(),window.addEventListener("resize",this.handleResize)}addEventListeners(){this.isEnabled&&(this.root.addEventListener("mousedown",this.onDragStart),this.root.addEventListener("mouseup",this.onDragEnd),this.root.addEventListener("mousemove",this.onDragMove),this.root.addEventListener("touchstart",this.onDragStart),this.root.addEventListener("touchend",this.onDragEnd),this.root.addEventListener("touchcancel",this.onDragEnd),this.root.addEventListener("touchmove",this.onDragMove),this.nextButton&&(this.nextButton.addEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.setAttribute("tabindex","0"),this.nextButton.addEventListener("keydown",this.handleButtonKeydown))),this.prevButton&&(this.prevButton.addEventListener("click",this.goToPrev),this.prevButton.nodeName!=="BUTTON"&&(this.prevButton.setAttribute("tabindex","0"),this.prevButton.addEventListener("keydown",this.handleButtonKeydown))),this.dots.forEach((t,e)=>{t.addEventListener("click",()=>{e!==this.currentIndex&&this.goToSlide(e)}),t.addEventListener("keydown",i=>{e!==this.currentIndex&&this.handleDotKeydown(i,e)})}),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.addEventListener("click",this.togglePause))}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{this.calculateSlidePositions(),this.resetSlider()},250)}setupOptions(){const t=this.wrapper.getAttribute(m);if(t){const r=parseFloat(t);!isNaN(r)&&r>=.1&&r<=1&&(this.threshold=r)}const e=this.wrapper.getAttribute(u);e&&(this.activeClass=e);const i=this.wrapper.getAttribute(d);i&&(this.draggingClass=i);const o=this.wrapper.getAttribute(c);o&&(this.disabledClass=o);const a=this.wrapper.getAttribute(B);if(a){const r=parseInt(a);!isNaN(r)&&r>0&&(this.autoplayInterval=r*1e3,this.pauseButton||console.error('Socks UI Carousel: Autoplay is enabled but no pause button found. Add an element with s-carousel="pause" attribute for accessibility.'))}}createDots(){const t=this.wrapper.querySelector(`[${T}]`);if(!t)return;const e=t.parentElement;e&&(t.classList.remove(this.activeClass),e.innerHTML="",this.slidePositions.forEach((i,o)=>{const a=t.cloneNode(!0);a.setAttribute("aria-label",`Go to slide ${o+1}`),a.setAttribute("role","button"),a.setAttribute("tabindex","0"),e.appendChild(a),this.dots.push(a)}))}calculateSlidePositions(){this.slidePositions=[0];let t=0;for(let e=this.slidesToScroll;e<this.slides.length;e+=this.slidesToScroll)t-=this.slides[e].offsetLeft-this.slides[e-this.slidesToScroll].offsetLeft,this.slidePositions.push(t)}goToSlide(t,e=!0){t<0&&(t=0),t>=this.slides.length&&(t=this.slides.length-1);const i=this.slidePositions[t];e?this.xTo(i):this.xSetter(i),this.currentIndex=t,this.updateActiveStates(),this.loop||this.updateButtonStates(),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()),this.updateAriaAttributes(),this.announceSlideChange()}updateActiveStates(){const t=Array.from({length:this.slidesToScroll},(e,i)=>this.currentIndex*this.slidesToScroll+i);this.slides.forEach((e,i)=>{const o=t.includes(i);e.classList.toggle(this.activeClass,o),e.setAttribute("aria-hidden",(!o).toString())}),this.dots.forEach((e,i)=>{e.classList.toggle(this.activeClass,i===this.currentIndex),i===this.currentIndex?e.setAttribute("aria-hidden","false"):e.setAttribute("aria-hidden","true")})}updateButtonStates(){const t=(e,i,o)=>{e&&(e.setAttribute("aria-label",i),e.nodeName!=="BUTTON"&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0")),this.loop?(e.classList.remove(this.disabledClass),e.removeAttribute("aria-disabled"),e.removeAttribute("tabindex")):(e.setAttribute("aria-disabled",o.toString()),e.classList.toggle(this.disabledClass,o),o?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")))};t(this.prevButton,"Previous slide",this.currentIndex===0),t(this.nextButton,"Next slide",this.currentIndex===this.slides.length-this.slidesToScroll)}startAutoplay(){if(this.isPaused)return;this.stopAutoplay();const t=this.autoplayRemainingTime!==null?this.autoplayRemainingTime:this.autoplayInterval??5e3;this.autoplayStartTime=Date.now(),this.autoplayTimeoutId=window.setTimeout(()=>{this.goToNext(),this.autoplayRemainingTime=null,this.startAutoplay()},t)}stopAutoplay(){if(this.autoplayTimeoutId!==null&&(window.clearTimeout(this.autoplayTimeoutId),this.autoplayTimeoutId=null,this.autoplayStartTime!==null)){const t=Date.now()-this.autoplayStartTime;this.autoplayRemainingTime=Math.max(0,(this.autoplayInterval??5e3)-t)}}resetSlider(){this.isEnabled&&(this.goToSlide(this.currentIndex,!1),this.updateActiveStates(),this.updateButtonStates(),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()))}removeEventListeners(){this.root.removeEventListener("mousedown",this.onDragStart),this.root.removeEventListener("mouseup",this.onDragEnd),this.root.removeEventListener("mousemove",this.onDragMove),this.root.removeEventListener("touchstart",this.onDragStart),this.root.removeEventListener("touchend",this.onDragEnd),this.root.removeEventListener("touchcancel",this.onDragEnd),this.root.removeEventListener("touchmove",this.onDragMove),this.nextButton&&(this.nextButton.removeEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.removeAttribute("tabindex"),this.nextButton.removeEventListener("keydown",this.handleButtonKeydown))),this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.removeEventListener("click",this.togglePause),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.removeAttribute("tabindex"),this.pauseButton.removeEventListener("keydown",this.handleButtonKeydown))),this.dots.forEach((t,e)=>{t.removeEventListener("click",()=>this.goToSlide(e)),t.removeEventListener("keydown",i=>this.handleDotKeydown(i,e))})}createLiveRegion(){const t=document.createElement("div");return t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("s-carousel-live-region"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.style.clip="rect(0 0 0 0)",this.wrapper.appendChild(t),t}setupKeyboardNavigation(){this.root.setAttribute("tabindex","0"),this.root.addEventListener("keydown",this.handleKeyDown)}updateAriaAttributes(){this.root.setAttribute("aria-roledescription","carousel"),this.slides.forEach((t,e)=>{t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-label",`${e+1} of ${this.slides.length}`)})}announceSlideChange(){const t=this.slides[this.currentIndex],e=this.currentIndex+1,i=this.slides.length,o=t.getAttribute("aria-label")||`Slide ${e}`;this.liveRegion.textContent=`${o}, ${e} of ${i}`}setupPauseButton(){this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.addEventListener("click",this.togglePause),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.setAttribute("tabindex","0"),this.pauseButton.addEventListener("keydown",this.handleButtonKeydown)),this.pauseButton.setAttribute("aria-label","Pause carousel"))}enable(){this.isEnabled||(this.isEnabled=!0,this.addEventListeners(),this.calculateSlidePositions(),this.resetSlider(),this.autoplayInterval!==null&&this.startAutoplay())}disable(){this.isEnabled&&(this.isEnabled=!1,this.removeEventListeners(),this.stopAutoplay(),this.resetDisabledState())}resetDisabledState(){this.root.style.transform="",this.slides.forEach(t=>t.classList.remove(this.activeClass)),this.dots.forEach(t=>t.classList.remove(this.activeClass)),this.currentIndex=0}destroy(){this.removeEventListeners(),this.stopAutoplay(),this.resizeTimeout&&clearTimeout(this.resizeTimeout),window.removeEventListener("resize",this.handleResize),this.root.removeEventListener("keydown",this.handleKeyDown),this.wrapper.removeChild(this.liveRegion),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.removeEventListener("click",this.togglePause)}}const S={};x.forEach((p,t)=>{const e=new w(p),i=p.id||`carousel-${t}`;S[i]=e}),window.socks={...window.socks,carousel:S}})();
