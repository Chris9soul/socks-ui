"use strict";var S=Object.defineProperty;var C=(n,r,a)=>r in n?S(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var s=(n,r,a)=>(C(n,typeof r!="symbol"?r+"":r,a),a);(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const n='s-carousel="wrapper"',r='s-carousel="root"',a='s-carousel="slide"',f='s-carousel="next"',A='s-carousel="prev"',w='s-carousel="dot"',c="s-threshold",p="s-active-class",g="s-dragging-class",v="s-disabled-class",b="s-autoplay",E=document.querySelectorAll(`[${n}]`);class L{constructor(t){s(this,"wrapper");s(this,"root");s(this,"slides");s(this,"nextButton");s(this,"prevButton");s(this,"dots");s(this,"liveRegion");s(this,"currentIndex");s(this,"dragging");s(this,"startX");s(this,"currentX");s(this,"slidesPositions");s(this,"currentDrag");s(this,"threshold",.3);s(this,"autoplayInterval",null);s(this,"autoplayTimeoutId",null);s(this,"activeClass","s-active");s(this,"draggingClass","s-dragging");s(this,"disabledClass","s-disabled");s(this,"breakpoints",{});s(this,"isEnabled",!0);s(this,"xSetter");s(this,"dragMoveCallback",null);s(this,"dragStartCallback",null);s(this,"dragEndCallback",null);this.wrapper=t,this.root=t.querySelector(`[${r}]`),this.slides=Array.from(t.querySelectorAll(`[${a}]`)),this.slides.length===0&&(this.slides=Array.from(t.children)),this.nextButton=t.querySelector(`[${f}]`),this.prevButton=t.querySelector(`[${A}]`),this.dots=[],this.currentIndex=0,this.dragging=!1,this.startX=0,this.currentX=0,this.slidesPositions=[],this.currentDrag=0,this.xSetter=gsap.quickSetter(this.root,"x","px"),this.init()}init(){this.setupOptions(),this.setupBreakpoints(),this.initCarousel(),this.addEventListeners(),this.setupAccessibility(),this.updateLiveRegion(),this.createDots(),this.updateActiveStates(),this.checkBreakpoint(),this.autoplayInterval!==null&&this.isEnabled&&this.startAutoplay()}setupOptions(){if(this.wrapper.hasAttribute(c)){const t=parseFloat(this.wrapper.getAttribute(c));t>=.1&&t<=1?this.threshold=t:console.error("Socks UI: The threshold value must be between 0.1 and 1")}if(this.wrapper.hasAttribute(p)&&(this.activeClass=this.wrapper.getAttribute(p)),this.wrapper.hasAttribute(g)&&(this.draggingClass=this.wrapper.getAttribute(g)),this.wrapper.hasAttribute(v)&&(this.disabledClass=this.wrapper.getAttribute(v)),this.wrapper.hasAttribute(b)){const t=parseInt(this.wrapper.getAttribute(b));!isNaN(t)&&t>0&&(this.autoplayInterval=t)}}setupBreakpoints(){Array.from(this.wrapper.attributes).filter(e=>e.name.startsWith("s-bp-")).sort((e,i)=>parseInt(i.name.split("-")[2])-parseInt(e.name.split("-")[2])).forEach(e=>{const i=parseInt(e.name.split("-")[2]);this.breakpoints[i]=e.value.toLowerCase()!=="off"})}checkBreakpoint(){const t=window.innerWidth;let e=!0;for(const[i,o]of Object.entries(this.breakpoints))if(t<=parseInt(i)){e=o;break}e!==this.isEnabled&&(this.isEnabled=e,this.toggleCarousel(e))}toggleCarousel(t){t?(this.wrapper.classList.remove(this.disabledClass),this.addEventListeners(),this.autoplayInterval!==null&&this.startAutoplay()):(this.wrapper.classList.add(this.disabledClass),this.removeEventListeners(),this.stopAutoplay())}initCarousel(){this.slidesPositions=this.calculateSlidePositions(),gsap.set(this.root,{x:0})}calculateSlidePositions(){let t=[0],e=0;for(let i=1;i<this.slides.length;i++)e+=this.slides[i].offsetLeft-this.slides[i-1].offsetLeft,t.push(e);return t}addEventListeners(){this.isEnabled&&(this.root.addEventListener("mousedown",this.onDragStart.bind(this)),this.root.addEventListener("touchstart",this.onDragStart.bind(this)),window.addEventListener("mousemove",this.onDragMove.bind(this)),window.addEventListener("touchmove",this.onDragMove.bind(this)),window.addEventListener("mouseup",this.onDragEnd.bind(this)),window.addEventListener("touchend",this.onDragEnd.bind(this)),this.nextButton&&this.nextButton.addEventListener("click",this.onNextClick.bind(this)),this.prevButton&&this.prevButton.addEventListener("click",this.onPrevClick.bind(this)))}removeEventListeners(){this.root.removeEventListener("mousedown",this.onDragStart.bind(this)),this.root.removeEventListener("touchstart",this.onDragStart.bind(this)),window.removeEventListener("mousemove",this.onDragMove.bind(this)),window.removeEventListener("touchmove",this.onDragMove.bind(this)),window.removeEventListener("mouseup",this.onDragEnd.bind(this)),window.removeEventListener("touchend",this.onDragEnd.bind(this)),this.nextButton&&this.nextButton.removeEventListener("click",this.onNextClick.bind(this)),this.prevButton&&this.prevButton.removeEventListener("click",this.onPrevClick.bind(this))}onNextClick(){this.goToSlide(this.currentIndex+1)}onPrevClick(){this.goToSlide(this.currentIndex-1)}setDragStartCallback(t){this.dragStartCallback=t}setDragEndCallback(t){this.dragEndCallback=t}setDragMoveCallback(t){this.dragMoveCallback=t}onDragStart(t){t.preventDefault(),this.dragging=!0,this.startX="touches"in t?t.touches[0].clientX:t.clientX,this.currentX=gsap.getProperty(this.root,"x"),this.wrapper.classList.add(this.draggingClass),gsap.killTweensOf(this.root),this.stopAutoplay(),this.dragStartCallback&&this.dragStartCallback()}onDragMove(t){if(!this.dragging)return;const i=("touches"in t?t.touches[0].clientX:t.clientX)-this.startX,o=this.currentX+i;this.currentDrag=i/this.slides[this.currentIndex].offsetWidth,this.xSetter(o),this.dragMoveCallback&&this.dragMoveCallback()}onDragEnd(){if(this.dragging){if(this.dragging=!1,this.wrapper.classList.remove(this.draggingClass),Math.abs(this.currentDrag)>this.threshold&&this.currentIndex+(this.currentDrag>0?-1:1)>=0&&this.currentIndex+(this.currentDrag>0?-1:1)<this.slides.length){const t=this.currentIndex+(this.currentDrag>0?-1:1);this.goToSlide(t)}else gsap.to(this.root,{x:-this.slidesPositions[this.currentIndex],duration:.5,ease:"power2.out"});this.autoplayInterval!==null&&this.startAutoplay(),this.dragEndCallback&&this.dragEndCallback()}}goToSlide(t){if(t<0&&(t=0),t>=this.slides.length&&(t=this.slides.length-1),t===this.currentIndex)return;gsap.quickTo(this.root,"x",{duration:.5,ease:"power2.out"})(-this.slidesPositions[t]),this.currentIndex=t,this.updateAriaAttributes(),this.updateLiveRegion(),this.updateActiveStates(),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay())}setupAccessibility(){this.wrapper.setAttribute("aria-roledescription","carousel"),this.root.setAttribute("aria-live","polite"),this.root.setAttribute("aria-atomic","true"),this.slides.forEach((t,e)=>{t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-label",`${e+1} of ${this.slides.length}`)}),this.setupNavigationButtons(),this.createLiveRegion(),this.updateAriaAttributes(),window.addEventListener("keydown",t=>{t.key==="ArrowRight"&&this.goToSlide(this.currentIndex+1),t.key==="ArrowLeft"&&this.goToSlide(this.currentIndex-1)})}setupNavigationButtons(){const t=(e,i)=>{e&&(e instanceof HTMLButtonElement?e.disabled=!1:(e.setAttribute("role","button"),e.setAttribute("tabindex","0")),e.setAttribute("aria-label",i))};t(this.nextButton,"Next slide"),t(this.prevButton,"Previous slide")}createLiveRegion(){this.liveRegion=document.createElement("div"),this.liveRegion.setAttribute("aria-live","polite"),this.liveRegion.setAttribute("aria-atomic","true"),this.liveRegion.classList.add("sr-only"),this.wrapper.appendChild(this.liveRegion)}updateAriaAttributes(){this.slides.forEach((t,e)=>{t.setAttribute("aria-hidden",(e!==this.currentIndex).toString())}),this.updateButtonState(this.nextButton,this.currentIndex===this.slides.length-1),this.updateButtonState(this.prevButton,this.currentIndex===0)}updateButtonState(t,e){t&&(t instanceof HTMLButtonElement&&(t.disabled=e),t.setAttribute("aria-disabled",e.toString()),t.classList.toggle(this.disabledClass,e))}updateLiveRegion(){this.liveRegion&&(this.liveRegion.textContent=`Slide ${this.currentIndex+1} of ${this.slides.length}`)}createDots(){const t=this.wrapper.querySelector(`[${w}]`);if(!t)return;const e=t.parentElement;e&&(t.classList.remove(this.activeClass),e.innerHTML="",this.slides.forEach((i,o)=>{const d=t.cloneNode(!0);d.setAttribute("aria-label",`Go to slide ${o+1}`),d.addEventListener("click",()=>this.goToSlide(o)),e.appendChild(d),this.dots.push(d)}))}updateActiveStates(){this.slides.forEach((t,e)=>{t.classList.toggle(this.activeClass,e===this.currentIndex)}),this.dots.forEach((t,e)=>{t.classList.toggle(this.activeClass,e===this.currentIndex)})}startAutoplay(){this.autoplayInterval!==null&&(this.stopAutoplay(),this.autoplayTimeoutId=window.setTimeout(()=>{this.goToSlide((this.currentIndex+1)%this.slides.length),this.startAutoplay()},this.autoplayInterval*1e3))}stopAutoplay(){this.autoplayTimeoutId!==null&&(window.clearTimeout(this.autoplayTimeoutId),this.autoplayTimeoutId=null)}}let l={};E.forEach((h,t)=>{const e=new L(h);l={...l,[`carousel-${t}`]:e}});let u=null;window.addEventListener("resize",()=>{u&&window.clearTimeout(u),u=window.setTimeout(()=>{for(const h in l)l[h].init()},250)}),window.socks={...window.socks,carousel:l}})();
