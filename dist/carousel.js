"use strict";var At=Object.defineProperty;var ft=(h,a,u)=>a in h?At(h,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[a]=u;var i=(h,a,u)=>(ft(h,typeof a!="symbol"?a+"":a,u),u),F=(h,a,u)=>{if(!a.has(h))throw TypeError("Cannot "+u)};var r=(h,a,u)=>(F(h,a,"read from private field"),u?u.call(h):a.get(h)),n=(h,a,u)=>{if(a.has(h))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(h):a.set(h,u)},H=(h,a,u,P)=>(F(h,a,"write to private field"),P?P.call(h,u):a.set(h,u),u);var o=(h,a,u)=>(F(h,a,"access private method"),u);(function(){var L,m,R,st,g,S,x,V,O,et,X,it,A,f,p,T,z,b,C,y,k,D,rt,N,ot,I,B,W,U,at,v,w,_,nt,E,$,ht;if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const h='s-carousel="wrapper"',a='s-carousel="root"',u='s-carousel="slide"',P='s-carousel="next"',lt='s-carousel="prev"',ut='s-carousel="dot"',dt='s-carousel="pause"',ct="s-threshold",q="s-active-class",G="s-dragging-class",M="s-disabled-class",j="s-paused-class",pt="s-autoplay",Q="s-duration",Y="s-ease",J="s-loop",Z="s-slides-to-scroll",gt=document.querySelectorAll(`[${h}]`);class vt{constructor(t){n(this,R);n(this,g);n(this,x);n(this,O);n(this,X);n(this,T);n(this,b);n(this,y);n(this,D);n(this,N);n(this,B);n(this,U);n(this,_);n(this,$);i(this,"eventListeners",{});i(this,"wrapper");i(this,"root");i(this,"slides");i(this,"nextButton");i(this,"prevButton");i(this,"dots");i(this,"pauseButton");i(this,"isPaused");i(this,"autoplayInterval");i(this,"autoplayTimeoutId");i(this,"currentIndex");i(this,"dragging");i(this,"startX");i(this,"currentX");i(this,"dragX");i(this,"threshold");i(this,"activeClass");i(this,"draggingClass");i(this,"disabledClass");i(this,"pausedClass");i(this,"isEnabled");n(this,L,void 0);n(this,m,void 0);i(this,"slidePositions");i(this,"duration");i(this,"ease");i(this,"loop");i(this,"resizeTimeout",null);i(this,"liveRegion");i(this,"slidesToScroll");i(this,"autoplayStartTime",null);i(this,"autoplayRemainingTime",null);n(this,A,t=>{t.type==="touchstart"&&t.preventDefault(),this.dragging=!0,this.startX="touches"in t?t.touches[0].clientX:t.clientX,this.currentX=gsap.getProperty(this.root,"x"),this.wrapper.classList.add(this.draggingClass),this.autoplayInterval!==null&&!this.isPaused&&this.stopAutoplay(),o(this,g,S).call(this,"dragstart",{startX:this.startX,currentX:this.currentX})});n(this,f,t=>{if(!this.dragging)return;const s="touches"in t?t.touches[0].clientX-this.startX:t.clientX-this.startX,e=this.currentX+s;this.dragX=s,r(this,L).call(this,e)});n(this,p,()=>{if(!this.dragging)return;this.dragging=!1,this.wrapper.classList.remove(this.draggingClass);const t=this.slides[0].offsetWidth,s=Math.abs(this.dragX)/t;requestAnimationFrame(()=>{let e=this.currentIndex;if(s>this.threshold){const l=this.dragX>0?-1:1;e=Math.max(0,Math.min(this.slides.length-this.slidesToScroll,this.currentIndex+l))}e!==this.currentIndex&&(this.currentIndex=e,o(this,b,C).call(this),this.loop||o(this,y,k).call(this)),this.goToSlide(e),this.dragX=0,this.autoplayInterval!==null&&this.isPaused&&this.startAutoplay(),o(this,g,S).call(this,"dragend",{dragDistance:this.dragX,currentIndex:this.currentIndex})})});i(this,"goToNext",()=>{var t;((t=this.nextButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===this.slides.length-this.slidesToScroll?this.goToSlide(0):this.goToSlide(this.currentIndex+1))});i(this,"goToPrev",()=>{var t;((t=this.prevButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===0?this.goToSlide(this.slides.length-this.slidesToScroll):this.goToSlide(this.currentIndex-this.slidesToScroll))});n(this,I,t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),this.goToPrev();break;case"ArrowRight":t.preventDefault(),this.goToNext();break}});n(this,v,t=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.target.click())});n(this,w,(t,s)=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.goToSlide(s))});n(this,E,()=>{var t,s,e,l,d,c;this.isPaused=!this.isPaused,this.isPaused?(this.stopAutoplay(),(t=this.pauseButton)==null||t.setAttribute("aria-label","Play carousel"),(s=this.pauseButton)==null||s.setAttribute("aria-pressed","true"),(e=this.pauseButton)==null||e.classList.add(this.pausedClass)):(this.startAutoplay(),(l=this.pauseButton)==null||l.setAttribute("aria-label","Pause carousel"),(d=this.pauseButton)==null||d.setAttribute("aria-pressed","false"),(c=this.pauseButton)==null||c.classList.remove(this.pausedClass))});this.wrapper=t,this.root=t.querySelector(`[${a}]`),this.slides=Array.from(t.querySelectorAll(`[${u}]`)),this.nextButton=t.querySelector(`[${P}]`),this.prevButton=t.querySelector(`[${lt}]`),this.pauseButton=t.querySelector(`[${dt}]`),this.dots=[],this.currentIndex=0,this.dragging=!1,this.startX=0,this.currentX=0,this.dragX=0,this.threshold=.3,this.autoplayInterval=null,this.autoplayTimeoutId=null,this.activeClass=t.getAttribute(q)?t.getAttribute(q):"s-active",this.draggingClass=t.getAttribute(G)?t.getAttribute(G):"s-dragging",this.disabledClass=t.getAttribute(M)?t.getAttribute(M):"s-disabled",this.pausedClass=t.getAttribute(j)?t.getAttribute(j):"s-paused",this.isEnabled=!0,H(this,L,gsap.quickSetter(this.root,"x","px")),this.duration=t.getAttribute(Q)?parseFloat(t.getAttribute(Q)):.5,this.ease=t.getAttribute(Y)?t.getAttribute(Y):"power2.out",H(this,m,o(this,R,st).call(this)),this.slidePositions=[],this.loop=t.getAttribute(J)?t.getAttribute(J)==="true":!1,this.liveRegion=o(this,D,rt).call(this),this.isPaused=!1,this.slidesToScroll=t.getAttribute(Z)?parseInt(t.getAttribute(Z)):1,this.handleResize=this.handleResize.bind(this),this.init()}on(t,s){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(s)}off(t,s){this.eventListeners[t]&&(this.eventListeners[t]=this.eventListeners[t].filter(e=>e!==s))}init(){o(this,O,et).call(this),o(this,T,z).call(this),o(this,X,it).call(this),o(this,b,C).call(this),o(this,_,nt).call(this),this.autoplayInterval!==null&&this.isEnabled&&(this.startAutoplay(),this.loop=!0),o(this,y,k).call(this),o(this,x,V).call(this),o(this,N,ot).call(this),o(this,B,W).call(this),window.addEventListener("resize",this.handleResize),o(this,g,S).call(this,"init",{carousel:this})}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{o(this,T,z).call(this),this.resetSlider()},250)}goToSlide(t,s=!0){const e=this.currentIndex;t<0&&(t=0),t>=this.slides.length&&(t=this.slides.length-1);const l=this.slidePositions[t];s?r(this,m).call(this,l):r(this,L).call(this,l),this.currentIndex=t,o(this,b,C).call(this),this.loop||o(this,y,k).call(this),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()),o(this,B,W).call(this),o(this,U,at).call(this),o(this,g,S).call(this,"change",{currentIndex:this.currentIndex,previousIndex:e})}startAutoplay(){if(this.isPaused)return;this.stopAutoplay();const t=this.autoplayRemainingTime!==null?this.autoplayRemainingTime:this.autoplayInterval??5e3;this.autoplayStartTime=Date.now(),this.autoplayTimeoutId=window.setTimeout(()=>{this.goToNext(),this.autoplayRemainingTime=null,this.startAutoplay()},t)}stopAutoplay(){if(this.autoplayTimeoutId!==null&&(window.clearTimeout(this.autoplayTimeoutId),this.autoplayTimeoutId=null,this.autoplayStartTime!==null)){const t=Date.now()-this.autoplayStartTime;this.autoplayRemainingTime=Math.max(0,(this.autoplayInterval??5e3)-t)}}resetSlider(){this.isEnabled&&(this.goToSlide(this.currentIndex,!1),o(this,b,C).call(this),o(this,y,k).call(this),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()))}removeEventListeners(){this.root.removeEventListener("mousedown",r(this,A)),this.root.removeEventListener("mouseup",r(this,p)),this.root.removeEventListener("mousemove",r(this,f)),this.root.removeEventListener("touchstart",r(this,A)),this.root.removeEventListener("touchend",r(this,p)),this.root.removeEventListener("touchcancel",r(this,p)),this.root.removeEventListener("touchmove",r(this,f)),this.nextButton&&(this.nextButton.removeEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.removeAttribute("tabindex"),this.nextButton.removeEventListener("keydown",r(this,v)))),this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.removeEventListener("click",r(this,E)),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.removeAttribute("tabindex"),this.pauseButton.removeEventListener("keydown",r(this,v)))),this.dots.forEach((t,s)=>{t.removeEventListener("click",()=>this.goToSlide(s)),t.removeEventListener("keydown",e=>r(this,w).call(this,e,s))})}enable(){this.isEnabled||(this.isEnabled=!0,o(this,x,V).call(this),o(this,T,z).call(this),this.resetSlider(),this.autoplayInterval!==null&&this.startAutoplay())}disable(){this.isEnabled&&(this.isEnabled=!1,this.removeEventListeners(),this.stopAutoplay(),o(this,$,ht).call(this))}destroy(){this.removeEventListeners(),this.stopAutoplay(),this.resizeTimeout&&clearTimeout(this.resizeTimeout),window.removeEventListener("resize",this.handleResize),this.root.removeEventListener("keydown",r(this,I)),this.wrapper.removeChild(this.liveRegion),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.removeEventListener("click",r(this,E)),o(this,g,S).call(this,"destroy",{carousel:this})}}L=new WeakMap,m=new WeakMap,R=new WeakSet,st=function(){let t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease});return s=>{t(s),t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease})}},g=new WeakSet,S=function(t,s={}){this.eventListeners[t]&&this.eventListeners[t].forEach(l=>l(s));const e=new CustomEvent(`socks:carousel:${t}`,{bubbles:!0,detail:s});this.wrapper.dispatchEvent(e)},x=new WeakSet,V=function(){this.isEnabled&&(this.root.addEventListener("mousedown",r(this,A)),this.root.addEventListener("mouseup",r(this,p)),this.root.addEventListener("mousemove",r(this,f)),this.root.addEventListener("touchstart",r(this,A)),this.root.addEventListener("touchend",r(this,p)),this.root.addEventListener("touchcancel",r(this,p)),this.root.addEventListener("touchmove",r(this,f)),this.nextButton&&(this.nextButton.addEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.setAttribute("tabindex","0"),this.nextButton.addEventListener("keydown",r(this,v)))),this.prevButton&&(this.prevButton.addEventListener("click",this.goToPrev),this.prevButton.nodeName!=="BUTTON"&&(this.prevButton.setAttribute("tabindex","0"),this.prevButton.addEventListener("keydown",r(this,v)))),this.dots.forEach((t,s)=>{t.addEventListener("click",()=>{s!==this.currentIndex&&this.goToSlide(s)}),t.addEventListener("keydown",e=>{s!==this.currentIndex&&r(this,w).call(this,e,s)})}),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.addEventListener("click",r(this,E)))},O=new WeakSet,et=function(){const t=this.wrapper.getAttribute(ct);if(t){const c=parseFloat(t);!isNaN(c)&&c>=.1&&c<=1&&(this.threshold=c)}const s=this.wrapper.getAttribute(q);s&&(this.activeClass=s);const e=this.wrapper.getAttribute(G);e&&(this.draggingClass=e);const l=this.wrapper.getAttribute(M);l&&(this.disabledClass=l);const d=this.wrapper.getAttribute(pt);if(d){const c=parseInt(d);!isNaN(c)&&c>0&&(this.autoplayInterval=c*1e3,this.pauseButton||console.error('Socks UI Carousel: Autoplay is enabled but no pause button found. Add an element with s-carousel="pause" attribute for accessibility.'))}},X=new WeakSet,it=function(){const t=this.wrapper.querySelector(`[${ut}]`);if(!t)return;const s=t.parentElement;s&&(t.classList.remove(this.activeClass),s.innerHTML="",this.slidePositions.forEach((e,l)=>{const d=t.cloneNode(!0);d.setAttribute("aria-label",`Go to slide ${l+1}`),d.setAttribute("role","button"),d.setAttribute("tabindex","0"),s.appendChild(d),this.dots.push(d)}))},A=new WeakMap,f=new WeakMap,p=new WeakMap,T=new WeakSet,z=function(){this.slidePositions=[0];let t=0;for(let s=this.slidesToScroll;s<this.slides.length;s+=this.slidesToScroll)t-=this.slides[s].offsetLeft-this.slides[s-this.slidesToScroll].offsetLeft,this.slidePositions.push(t)},b=new WeakSet,C=function(){const t=Array.from({length:this.slidesToScroll},(s,e)=>this.currentIndex*this.slidesToScroll+e);this.slides.forEach((s,e)=>{const l=t.includes(e);s.classList.toggle(this.activeClass,l),s.setAttribute("aria-hidden",(!l).toString())}),this.dots.forEach((s,e)=>{s.classList.toggle(this.activeClass,e===this.currentIndex)})},y=new WeakSet,k=function(){const t=(s,e,l)=>{s&&(s.setAttribute("aria-label",e),s.nodeName!=="BUTTON"&&(s.setAttribute("role","button"),s.setAttribute("tabindex","0")),this.loop?(s.classList.remove(this.disabledClass),s.removeAttribute("aria-disabled"),s.removeAttribute("tabindex")):(s.setAttribute("aria-disabled",l.toString()),s.classList.toggle(this.disabledClass,l),l?s.setAttribute("tabindex","-1"):s.removeAttribute("tabindex")))};t(this.prevButton,"Previous slide",this.currentIndex===0),t(this.nextButton,"Next slide",this.currentIndex===this.slides.length-this.slidesToScroll)},D=new WeakSet,rt=function(){const t=document.createElement("div");return t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("s-carousel-live-region"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.style.clip="rect(0 0 0 0)",this.wrapper.appendChild(t),t},N=new WeakSet,ot=function(){this.root.setAttribute("tabindex","0"),this.root.addEventListener("keydown",r(this,I))},I=new WeakMap,B=new WeakSet,W=function(){this.root.setAttribute("aria-roledescription","carousel"),this.slides.forEach((t,s)=>{t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-label",`${s+1} of ${this.slides.length}`)})},U=new WeakSet,at=function(){const t=this.slides[this.currentIndex],s=this.currentIndex+1,e=this.slides.length,l=t.getAttribute("aria-label")||`Slide ${s}`;this.liveRegion.textContent=`${l}, ${s} of ${e}`},v=new WeakMap,w=new WeakMap,_=new WeakSet,nt=function(){this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.addEventListener("click",r(this,E)),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.setAttribute("tabindex","0"),this.pauseButton.addEventListener("keydown",r(this,v))),this.pauseButton.setAttribute("aria-label","Pause carousel"))},E=new WeakMap,$=new WeakSet,ht=function(){this.root.style.transform="",this.slides.forEach(t=>t.classList.remove(this.activeClass)),this.dots.forEach(t=>t.classList.remove(this.activeClass)),this.currentIndex=0};const tt={};gt.forEach((K,t)=>{const s=new vt(K),e=K.id||`carousel-${t}`;tt[e]=s}),window.socks={...window.socks,carousel:tt}})();
