"use strict";var Lt=Object.defineProperty;var Et=(l,n,u)=>n in l?Lt(l,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[n]=u;var e=(l,n,u)=>(Et(l,typeof n!="symbol"?n+"":n,u),u),W=(l,n,u)=>{if(!n.has(l))throw TypeError("Cannot "+u)};var r=(l,n,u)=>(W(l,n,"read from private field"),u?u.call(l):n.get(l)),h=(l,n,u)=>{if(n.has(l))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(l):n.set(l,u)},F=(l,n,u,R)=>(W(l,n,"write to private field"),R?R.call(l,u):n.set(l,u),u);var o=(l,n,u)=>(W(l,n,"access private method"),u);(function(){var y,I,D,rt,v,m,x,V,X,ot,O,at,A,b,g,T,q,L,k,E,P,N,nt,U,ht,w,B,j,_,lt,f,C,z,ut,S,$,dt;if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const l='s-carousel="wrapper"',n='s-carousel="root"',u='s-carousel="slide"',R='s-carousel="next"',ct='s-carousel="prev"',pt='s-carousel="dot"',gt='s-carousel="pause"',vt="s-threshold",Y="s-active-class",M="s-dragging-class",H="s-disabled-class",Q="s-paused-class",ft="s-autoplay",J="s-duration",Z="s-ease",tt="s-loop",st="s-slides-to-scroll",G="s-disable-swipe",et="s-disable-inert",At=document.querySelectorAll(`[${l}]`);class bt{constructor(t){h(this,D);h(this,v);h(this,x);h(this,X);h(this,O);h(this,T);h(this,L);h(this,E);h(this,N);h(this,U);h(this,B);h(this,_);h(this,z);h(this,$);e(this,"eventListeners",{});e(this,"wrapper");e(this,"root");e(this,"slides");e(this,"nextButton");e(this,"prevButton");e(this,"dots");e(this,"pauseButton");e(this,"isPaused");e(this,"autoplayInterval");e(this,"autoplayTimeoutId");e(this,"currentIndex");e(this,"isDragging");e(this,"isAnimating");e(this,"startX");e(this,"currentX");e(this,"dragX");e(this,"threshold");e(this,"activeClass");e(this,"draggingClass");e(this,"disabledClass");e(this,"pausedClass");e(this,"isEnabled");h(this,y,void 0);h(this,I,void 0);e(this,"slidePositions");e(this,"duration");e(this,"ease");e(this,"loop");e(this,"resizeTimeout",null);e(this,"liveRegion");e(this,"slidesToScroll");e(this,"autoplayStartTime",null);e(this,"autoplayRemainingTime",null);e(this,"isHorizontalDrag",!1);e(this,"dragLocked",!1);e(this,"startY",0);e(this,"disableSwipe",!1);e(this,"disableInert",!1);h(this,A,t=>{this.isDragging=!0,this.startX="touches"in t?t.touches[0].clientX:t.clientX,this.startY="touches"in t?t.touches[0].clientY:t.clientY,this.currentX=gsap.getProperty(this.root,"x"),this.isHorizontalDrag=!1,this.dragLocked=!1,this.wrapper.classList.add(this.draggingClass),this.autoplayInterval!==null&&!this.isPaused&&this.stopAutoplay(),o(this,v,m).call(this,"dragstart",{startX:this.startX,currentX:this.currentX})});h(this,b,t=>{if(!this.isDragging)return;const s="touches"in t?t.touches[0].clientX:t.clientX,i="touches"in t?t.touches[0].clientY:t.clientY,a=s-this.startX,d=i-this.startY;if(!this.dragLocked){const p=Math.abs(a),c=Math.abs(d);(p>5||c>5)&&(this.isHorizontalDrag=p>c,this.dragLocked=!0)}if(this.isHorizontalDrag){t.preventDefault();const p=this.currentX+a;this.dragX=a,r(this,y).call(this,p)}});h(this,g,()=>{if(!this.isDragging)return;this.isDragging=!1,this.wrapper.classList.remove(this.draggingClass);const t=this.slides[0].offsetWidth,s=Math.abs(this.dragX)/t;requestAnimationFrame(()=>{let i=this.currentIndex;if(s>this.threshold){const a=this.dragX>0?-1:1;i=Math.max(0,Math.min(this.slides.length-this.slidesToScroll,this.currentIndex+a))}i!==this.currentIndex&&(this.currentIndex=i,o(this,L,k).call(this),this.loop||o(this,E,P).call(this)),this.goToSlide(i),this.dragX=0,this.autoplayInterval!==null&&this.isPaused&&this.startAutoplay(),o(this,v,m).call(this,"dragend",{dragDistance:this.dragX,currentIndex:this.currentIndex})})});e(this,"goToNext",()=>{var t;((t=this.nextButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===this.slides.length-this.slidesToScroll?this.goToSlide(0):this.goToSlide(this.currentIndex+1))});e(this,"goToPrev",()=>{var t;((t=this.prevButton)==null?void 0:t.getAttribute("aria-disabled"))!=="true"&&(this.loop&&this.currentIndex===0?this.goToSlide(this.slides.length-this.slidesToScroll):this.goToSlide(this.currentIndex-this.slidesToScroll))});h(this,w,t=>{switch(t.key){case"ArrowLeft":t.preventDefault(),this.goToPrev();break;case"ArrowRight":t.preventDefault(),this.goToNext();break}});h(this,f,t=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),t.target.click())});h(this,C,(t,s)=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.goToSlide(s))});h(this,S,()=>{var t,s,i,a,d,p;this.isPaused=!this.isPaused,this.isPaused?(this.stopAutoplay(),(t=this.pauseButton)==null||t.setAttribute("aria-label","Play carousel"),(s=this.pauseButton)==null||s.setAttribute("aria-pressed","true"),(i=this.pauseButton)==null||i.classList.add(this.pausedClass)):(this.startAutoplay(),(a=this.pauseButton)==null||a.setAttribute("aria-label","Pause carousel"),(d=this.pauseButton)==null||d.setAttribute("aria-pressed","false"),(p=this.pauseButton)==null||p.classList.remove(this.pausedClass))});this.wrapper=t,this.root=t.querySelector(`[${n}]`),this.slides=Array.from(t.querySelectorAll(`[${u}]`)),this.nextButton=t.querySelector(`[${R}]`),this.prevButton=t.querySelector(`[${ct}]`),this.pauseButton=t.querySelector(`[${gt}]`),this.dots=[],this.currentIndex=0,this.isDragging=!1,this.isAnimating=!1,this.startX=0,this.currentX=0,this.dragX=0,this.threshold=.3,this.autoplayInterval=null,this.autoplayTimeoutId=null,this.activeClass=t.getAttribute(Y)?t.getAttribute(Y):"s-active",this.draggingClass=t.getAttribute(M)?t.getAttribute(M):"s-dragging",this.disabledClass=t.getAttribute(H)?t.getAttribute(H):"s-disabled",this.pausedClass=t.getAttribute(Q)?t.getAttribute(Q):"s-paused",this.isEnabled=!0,F(this,y,gsap.quickSetter(this.root,"x","px")),this.duration=t.getAttribute(J)?parseFloat(t.getAttribute(J)):.5,this.ease=t.getAttribute(Z)?t.getAttribute(Z):"power2.out",F(this,I,o(this,D,rt).call(this)),this.slidePositions=[],this.loop=t.getAttribute(tt)?t.getAttribute(tt)==="true":!1,this.liveRegion=o(this,N,nt).call(this),this.isPaused=!1,this.slidesToScroll=t.getAttribute(st)?parseInt(t.getAttribute(st)):1,this.disableSwipe=t.getAttribute(G)?t.getAttribute(G)==="true":!1,this.disableInert=t.getAttribute(et)?t.getAttribute(et)==="true":!1,this.handleResize=this.handleResize.bind(this),this.init()}on(t,s){this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(s)}off(t,s){this.eventListeners[t]&&(this.eventListeners[t]=this.eventListeners[t].filter(i=>i!==s))}init(){o(this,X,ot).call(this),o(this,T,q).call(this),o(this,O,at).call(this),o(this,L,k).call(this),o(this,z,ut).call(this),this.autoplayInterval!==null&&this.isEnabled&&(this.startAutoplay(),this.loop=!0),o(this,E,P).call(this),o(this,x,V).call(this),o(this,U,ht).call(this),o(this,B,j).call(this),window.addEventListener("resize",this.handleResize),o(this,v,m).call(this,"init",{carousel:this})}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(()=>{o(this,T,q).call(this),this.resetSlider()},250)}goToSlide(t,s=!0){const i=this.currentIndex;t<0&&(t=0),t>=this.slides.length&&(t=this.slides.length-1);const a=this.slidePositions[t];s?r(this,I).call(this,a):r(this,y).call(this,a),this.currentIndex=t,o(this,L,k).call(this),this.loop||o(this,E,P).call(this),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()),o(this,B,j).call(this),o(this,_,lt).call(this),o(this,v,m).call(this,"change",{currentIndex:this.currentIndex,previousIndex:i})}startAutoplay(){if(this.isPaused)return;this.stopAutoplay();const t=this.autoplayRemainingTime!==null?this.autoplayRemainingTime:this.autoplayInterval??5e3;this.autoplayStartTime=Date.now(),this.autoplayTimeoutId=window.setTimeout(()=>{this.goToNext(),this.autoplayRemainingTime=null,this.startAutoplay()},t)}stopAutoplay(){if(this.autoplayTimeoutId!==null&&(window.clearTimeout(this.autoplayTimeoutId),this.autoplayTimeoutId=null,this.autoplayStartTime!==null)){const t=Date.now()-this.autoplayStartTime;this.autoplayRemainingTime=Math.max(0,(this.autoplayInterval??5e3)-t)}}resetSlider(){this.isEnabled&&(this.goToSlide(this.currentIndex,!1),o(this,L,k).call(this),o(this,E,P).call(this),this.autoplayInterval!==null&&(this.stopAutoplay(),this.startAutoplay()))}removeEventListeners(){this.disableSwipe||(this.root.removeEventListener("mousedown",r(this,A)),this.root.removeEventListener("mouseup",r(this,g)),this.root.removeEventListener("mousemove",r(this,b)),this.root.removeEventListener("touchstart",r(this,A)),this.root.removeEventListener("touchend",r(this,g)),this.root.removeEventListener("touchcancel",r(this,g)),this.root.removeEventListener("touchmove",r(this,b))),this.nextButton&&(this.nextButton.removeEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.removeAttribute("tabindex"),this.nextButton.removeEventListener("keydown",r(this,f)))),this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.removeEventListener("click",r(this,S)),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.removeAttribute("tabindex"),this.pauseButton.removeEventListener("keydown",r(this,f)))),this.dots.forEach((t,s)=>{t.removeEventListener("click",()=>this.goToSlide(s)),t.removeEventListener("keydown",i=>r(this,C).call(this,i,s))})}enable(){this.isEnabled||(this.isEnabled=!0,o(this,x,V).call(this),o(this,T,q).call(this),this.resetSlider(),this.autoplayInterval!==null&&this.startAutoplay())}disable(){this.isEnabled&&(this.isEnabled=!1,this.removeEventListeners(),this.stopAutoplay(),o(this,$,dt).call(this))}destroy(){this.removeEventListeners(),this.stopAutoplay(),this.resizeTimeout&&clearTimeout(this.resizeTimeout),window.removeEventListener("resize",this.handleResize),this.root.removeEventListener("keydown",r(this,w)),this.wrapper.removeChild(this.liveRegion),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.removeEventListener("click",r(this,S)),o(this,v,m).call(this,"destroy",{carousel:this})}}y=new WeakMap,I=new WeakMap,D=new WeakSet,rt=function(){let t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease});return s=>{t(s),t=gsap.quickTo(this.root,"x",{duration:this.duration,ease:this.ease})}},v=new WeakSet,m=function(t,s={}){this.eventListeners[t]&&this.eventListeners[t].forEach(a=>a(s));const i=new CustomEvent(`socks:carousel:${t}`,{bubbles:!0,detail:s});this.wrapper.dispatchEvent(i)},x=new WeakSet,V=function(){this.isEnabled&&(this.disableSwipe||(this.root.addEventListener("mousedown",r(this,A)),this.root.addEventListener("mouseup",r(this,g)),this.root.addEventListener("mousemove",r(this,b)),this.root.addEventListener("touchstart",r(this,A)),this.root.addEventListener("touchend",r(this,g)),this.root.addEventListener("touchcancel",r(this,g)),this.root.addEventListener("touchmove",r(this,b))),this.nextButton&&(this.nextButton.addEventListener("click",this.goToNext),this.nextButton.nodeName!=="BUTTON"&&(this.nextButton.setAttribute("tabindex","0"),this.nextButton.addEventListener("keydown",r(this,f)))),this.prevButton&&(this.prevButton.addEventListener("click",this.goToPrev),this.prevButton.nodeName!=="BUTTON"&&(this.prevButton.setAttribute("tabindex","0"),this.prevButton.addEventListener("keydown",r(this,f)))),this.dots.forEach((t,s)=>{t.addEventListener("click",()=>{s!==this.currentIndex&&this.goToSlide(s)}),t.addEventListener("keydown",i=>{s!==this.currentIndex&&r(this,C).call(this,i,s)})}),this.pauseButton&&this.autoplayInterval!==null&&this.pauseButton.addEventListener("click",r(this,S)))},X=new WeakSet,ot=function(){const t=this.wrapper.getAttribute(vt);if(t){const c=parseFloat(t);!isNaN(c)&&c>=.1&&c<=1&&(this.threshold=c)}const s=this.wrapper.getAttribute(Y);s&&(this.activeClass=s);const i=this.wrapper.getAttribute(M);i&&(this.draggingClass=i);const a=this.wrapper.getAttribute(H);a&&(this.disabledClass=a);const d=this.wrapper.getAttribute(ft);if(d){const c=parseInt(d);!isNaN(c)&&c>0&&(this.autoplayInterval=c*1e3,this.pauseButton||console.error('Socks UI Carousel: Autoplay is enabled but no pause button found. Add an element with s-carousel="pause" attribute for accessibility.'))}const p=this.wrapper.getAttribute(G);p&&(this.disableSwipe=p==="true")},O=new WeakSet,at=function(){const t=this.wrapper.querySelector(`[${pt}]`);if(!t)return;const s=t.parentElement;s&&(t.classList.remove(this.activeClass),s.innerHTML="",this.slidePositions.forEach((i,a)=>{const d=t.cloneNode(!0);d.setAttribute("aria-label",`Go to slide ${a+1}`),d.setAttribute("role","button"),d.setAttribute("tabindex","0"),s.appendChild(d),this.dots.push(d)}))},A=new WeakMap,b=new WeakMap,g=new WeakMap,T=new WeakSet,q=function(){this.slidePositions=[0];let t=0;for(let s=this.slidesToScroll;s<this.slides.length;s+=this.slidesToScroll)t-=this.slides[s].offsetLeft-this.slides[s-this.slidesToScroll].offsetLeft,this.slidePositions.push(t)},L=new WeakSet,k=function(){const t=Array.from({length:this.slidesToScroll},(s,i)=>this.currentIndex*this.slidesToScroll+i);this.slides.forEach((s,i)=>{const a=t.includes(i);s.classList.toggle(this.activeClass,a),s.setAttribute("aria-hidden",(!a).toString()),s.toggleAttribute("inert",!a&&!this.disableInert)}),this.dots.forEach((s,i)=>{s.classList.toggle(this.activeClass,i===this.currentIndex)})},E=new WeakSet,P=function(){const t=(s,i,a)=>{s&&(s.setAttribute("aria-label",i),s.nodeName!=="BUTTON"&&(s.setAttribute("role","button"),s.setAttribute("tabindex","0")),this.loop?(s.classList.remove(this.disabledClass),s.removeAttribute("aria-disabled"),s.removeAttribute("tabindex")):(s.setAttribute("aria-disabled",a.toString()),s.classList.toggle(this.disabledClass,a),a?s.setAttribute("tabindex","-1"):s.removeAttribute("tabindex")))};t(this.prevButton,"Previous slide",this.currentIndex===0),t(this.nextButton,"Next slide",this.currentIndex===this.slides.length-this.slidesToScroll)},N=new WeakSet,nt=function(){const t=document.createElement("div");return t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("s-carousel-live-region"),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",t.style.clip="rect(0 0 0 0)",this.wrapper.appendChild(t),t},U=new WeakSet,ht=function(){this.root.setAttribute("tabindex","0"),this.root.addEventListener("keydown",r(this,w))},w=new WeakMap,B=new WeakSet,j=function(){this.root.setAttribute("aria-roledescription","carousel"),this.slides.forEach((t,s)=>{t.setAttribute("role","group"),t.setAttribute("aria-roledescription","slide"),t.setAttribute("aria-label",`${s+1} of ${this.slides.length}`)})},_=new WeakSet,lt=function(){const t=this.slides[this.currentIndex],s=this.currentIndex+1,i=this.slides.length,a=t.getAttribute("aria-label")||`Slide ${s}`;this.liveRegion.textContent=`${a}, ${s} of ${i}`},f=new WeakMap,C=new WeakMap,z=new WeakSet,ut=function(){this.pauseButton&&this.autoplayInterval!==null&&(this.pauseButton.addEventListener("click",r(this,S)),this.pauseButton.nodeName!=="BUTTON"&&(this.pauseButton.setAttribute("tabindex","0"),this.pauseButton.addEventListener("keydown",r(this,f))),this.pauseButton.setAttribute("aria-label","Pause carousel"))},S=new WeakMap,$=new WeakSet,dt=function(){this.root.style.transform="",this.slides.forEach(t=>t.classList.remove(this.activeClass)),this.dots.forEach(t=>t.classList.remove(this.activeClass)),this.currentIndex=0};const it={};At.forEach((K,t)=>{const s=new bt(K),i=K.id||`carousel-${t}`;it[i]=s}),window.socks={...window.socks,carousel:it}})();
