"use strict";(function(){var A;if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const O='s-toc="list"',f='s-toc="content"',b='s-toc="text"',$="s-active",q="s-toc-selector",E="s-toc-offset",I="s-toc-active";let c="h2",h="h3";const e=document.querySelector(`[${O}]`);if(!e){console.error("Socks UI: Couldn't find any list with the attribute [s-toc='list']");return}if(e.tagName!=="UL"&&e.tagName!=="OL"){console.error("Socks UI: The Table of Contents should be a List element");return}const a=e.closest("nav");if(!a){console.error("Socks UI: The Table of Contents should be inside a Nav landmark");return}a.getAttribute("aria-label")===null&&a.getAttribute("aria-labelledby")===null&&a.setAttribute("aria-label","Table of Contents");const o=((A=e.getAttribute(q))==null?void 0:A.split(","))||[];if((o==null?void 0:o.length)>0&&(c=o[0],o.length>1&&(h=o[1]),o.length>2)){console.error("Socks UI: The custom selector can only have one comma");return}const r=e.querySelector("li");if(!r){console.error("Socks UI: Couldn't find a list item template");return}if(r.querySelector(`[${b}]`)===null){console.error("Socks UI: Couldn't find any text node with the attribute [s-toc='text']");return}const m=r.querySelector("li")||null,T=document.querySelector(`[${f}]`);if(!T){console.error("Socks UI: Couldn't find any content with the attribute [s-toc='content']");return}const y=e.getAttribute(E)||"80px",k=document.createElement("style");k.textContent=`
  [${f}] ${c}::before, [${f}] ${h}::before { 
    content: '';
    display: block; 
    position: relative; 
    width: 0; 
    height: ${y}; 
    margin-top: -${y};
  } 
  `,document.head.appendChild(k);const C=e.getAttribute(I)||$,L=m?`${c}, ${h}`:c,S=T.querySelectorAll(L);let g=[];S.forEach((t,u)=>{const l=t.tagName===c.toUpperCase()?1:2;let i=m||r;l===1&&(i=r);const s=t.textContent;if(!s)return;t.id="s-"+s.replace(/\s/g,"-").toLowerCase().replace(/[^a-z0-9-]/g,"");const n=i.cloneNode(!0),U=n.querySelector(`[${b}]`);if(!U)return;U.textContent=s;const p=n.querySelector("a");if(p){if(p.href=`#${t.id}`,l===1)g.push(n),e.appendChild(n);else{const d=g[g.length-1];if(!d)return;const v=d.querySelector("ul");if(!v)return;v.appendChild(n)}ScrollTrigger.create({trigger:t,start:"top 35%",endTrigger:S[u+1]??T,end:S[u+1]?"top 35%":"bottom 50%",onToggle:({isActive:d})=>{d&&x(p,l)}})}});function x(t,u){var l,i,s;e==null||e.querySelectorAll("a").forEach(n=>n.classList.remove(C)),t.classList.add(C),u!==1&&((s=(i=(l=t.closest("ul"))==null?void 0:l.parentNode)==null?void 0:i.querySelector("a"))==null||s.classList.add(C))}r.remove(),e.querySelectorAll("li ul li:first-child").forEach(t=>{t.remove()})})();
