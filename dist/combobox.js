"use strict";(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const O='s-combobox="root"',h='s-combobox="list"',E='s-combobox="text"',g="s-active",C="s-prevent-submit",L="s-active-class",A=document.querySelectorAll(`[${O}]`);if(!A.length){console.error("Socks UI: Couldn't find any combobox with the attribute [s-combobox]");return}function x(a,i,o){let r=Array.from(o.querySelectorAll("li")),n=[...r],s=null,c=!1;if(a.hasAttribute(C)){const e=a.closest("form");if(!e)return;e.addEventListener("submit",t=>{t.stopImmediatePropagation(),t.preventDefault()},!0)}const m=a.getAttribute(L)||g;function u(e){e&&c?(i.setAttribute("aria-activedescendant",e.id),y(e)||e.scrollIntoView({behavior:"smooth",block:"nearest"})):i.setAttribute("aria-activedescendant","")}function y(e){const t=e.getBoundingClientRect(),l=o.getBoundingClientRect();return t.top>=l.top&&t.bottom<=l.bottom}function p(e){const t=e.querySelector(`[${E}]`);return t?t.textContent:""}function S(){const e=i.value.toLowerCase();return n=r.filter(t=>(p(t)||"").toLowerCase().includes(e)),o.innerHTML="",n.forEach(t=>o.appendChild(t)),n.length>0?n[0]:null}function f(e){n.forEach(t=>{t===e?(t.setAttribute("aria-selected","true"),t.classList.add(m)):(t.removeAttribute("aria-selected"),t.classList.remove(m))})}gsap.set(o,{display:"none",transformOrigin:"top center"});const v=gsap.timeline({paused:!0}).set(o,{display:"block"}).from(o,{opacity:0,scale:.95,duration:.2});function b(){v.play(),i.setAttribute("aria-expanded","true"),c=!0}function d(){v.reverse(),i.setAttribute("aria-expanded","false"),u(null),c=!1}i.addEventListener("input",()=>{const e=S();e?(b(),f(e),u(e)):d()}),i.addEventListener("focus",()=>{n.length>0&&b()}),i.addEventListener("keydown",e=>{switch(s||(s=n[0]),e.key){case"ArrowDown":e.preventDefault(),c||b();const t=n[n.indexOf(s)+1]||n[0];f(t),u(t),s=t;break;case"ArrowUp":e.preventDefault(),c||b();const l=n[n.indexOf(s)-1]||n[n.length-1];f(l),u(l),s=l;break;case"Enter":s&&(i.value=p(s)||"",d());break;case"Escape":d();break}}),Array.from(o.children).forEach(e=>{e.addEventListener("click",()=>{i.value=p(e)||"",d()})}),document.addEventListener("click",e=>{a.contains(e.target)||d()}),f(o.children[0]),u(o.children[0])}A.forEach((a,i)=>{const o=a.querySelector("input");if(!o){console.error(`Socks UI: Couldn't find an input inside combobox ${i}`);return}const r=a.querySelector(`[${h}]`);if(!r){console.error(`Socks UI: Couldn't find a list inside combobox ${i}`);return}r.tagName!=="UL"&&r.tagName!=="OL"&&(r.role="list"),r.setAttribute("role","listbox"),r.hasAttribute("aria-label")||r.setAttribute("aria-label","List of options"),r.id||(r.id=`cbx-${i}-listbox`),Array.from(r.children).forEach((s,c)=>{s.setAttribute("role","option"),s.id||(s.id=`${r.id}-option-${c}`),s.style.cursor="pointer"}),o.setAttribute("role","combobox"),o.setAttribute("aria-autocomplete","both"),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",r.id),o.setAttribute("aria-activedescendant",""),o.setAttribute("autocomplete","off"),x(a,o,r)})})();
