"use strict";(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const O='s-combobox="root"',E='s-combobox="list"',g='s-combobox="text"',h="s-active",C="s-prevent-submit",L="s-active-class",A=document.querySelectorAll(`[${O}]`);if(!A.length){console.error("Socks UI: Couldn't find any combobox with the attribute [s-combobox]");return}function x(a,i,o){let r=Array.from(o.querySelectorAll("li")),n=[...r],s=null,c=!1;if(a.hasAttribute(C)){const t=a.closest("form");if(!t)return;t.addEventListener("submit",e=>{e.stopImmediatePropagation(),e.preventDefault()},!0)}const m=a.getAttribute(L)||h;function d(t){t&&c?(i.setAttribute("aria-activedescendant",t.id),y(t)||t.scrollIntoView({behavior:"smooth",block:"nearest"})):i.setAttribute("aria-activedescendant","")}function y(t){const e=t.getBoundingClientRect(),l=o.getBoundingClientRect();return e.top>=l.top&&e.bottom<=l.bottom}function b(t){const e=t.querySelector(`[${g}]`);return e?e.textContent:""}function S(){const t=i.value.toLowerCase();return n=r.filter(e=>(b(e)||"").toLowerCase().startsWith(t)),o.innerHTML="",n.forEach(e=>o.appendChild(e)),n.length>0?n[0]:null}function p(t){n.forEach(e=>{e===t?(e.setAttribute("aria-selected","true"),e.classList.add(m)):(e.removeAttribute("aria-selected"),e.classList.remove(m))})}gsap.set(o,{display:"none",transformOrigin:"top center"});const v=gsap.timeline({paused:!0}).set(o,{display:"block"}).from(o,{opacity:0,scale:.95,duration:.2});function f(){v.play(),i.setAttribute("aria-expanded","true"),c=!0}function u(){v.reverse(),i.setAttribute("aria-expanded","false"),d(null),c=!1}i.addEventListener("input",()=>{const t=S();t?(f(),p(t),d(t)):u()}),i.addEventListener("focus",()=>{n.length>0&&f()}),i.addEventListener("keydown",t=>{switch(s||(s=n[0]),t.key){case"ArrowDown":t.preventDefault(),c||f();const e=n[n.indexOf(s)+1]||n[0];p(e),d(e),s=e;break;case"ArrowUp":t.preventDefault(),c||f();const l=n[n.indexOf(s)-1]||n[n.length-1];p(l),d(l),s=l;break;case"Enter":s&&(i.value=b(s)||"",u());break;case"Escape":u();break}}),Array.from(o.children).forEach(t=>{t.addEventListener("click",()=>{i.value=b(t)||"",u()})}),document.addEventListener("click",t=>{a.contains(t.target)||u()})}A.forEach((a,i)=>{const o=a.querySelector("input");if(!o){console.error(`Socks UI: Couldn't find an input inside combobox ${i}`);return}const r=a.querySelector(`[${E}]`);if(!r){console.error(`Socks UI: Couldn't find a list inside combobox ${i}`);return}r.tagName!=="UL"&&r.tagName!=="OL"&&(r.role="list"),r.setAttribute("role","listbox"),r.hasAttribute("aria-label")||r.setAttribute("aria-label","List of options"),r.id||(r.id=`cbx-${i}-listbox`),Array.from(r.children).forEach((s,c)=>{s.setAttribute("role","option"),s.id||(s.id=`${r.id}-option-${c}`),s.style.cursor="pointer"}),o.setAttribute("role","combobox"),o.setAttribute("aria-autocomplete","both"),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",r.id),o.setAttribute("aria-activedescendant",""),o.setAttribute("autocomplete","off"),x(a,o,r)})})();
