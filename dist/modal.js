"use strict";(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const A='s-modal="wrapper"',w='s-modal="root"',E='s-modal="overlay"',v='s-modal="title"',k='s-modal="close"',g="s-modal-trigger",S="s-manual",u=document.querySelectorAll(`[${A}]`);if(u.length===0){console.error(`Socks UI: Couldn't find any modal wrappers. Make sure to add the [s-modal="wrapper"] attribute to your modal wrappers.`);return}let r={};const I=e=>{r[e]?r[e].open():console.error(`Socks UI: Couldn't find a modal with the ID "${e}".`)},M=e=>{r[e]?r[e].close():console.error(`Socks UI: Couldn't find a modal with the ID "${e}".`)};u.forEach((e,L)=>{const s=e.getAttribute("id");if(!s){console.error(`Socks UI: Modal ${L} is missing an ID. Please provide an ID for your modal wrapper.`);return}e.style.overflow="hidden";const m=document.querySelectorAll(`[${g}=${s}]`),$=e.hasAttribute(S);if(m.length===0&&!$){console.error(`Socks UI: Couldn't find any triggers for modal ${s}. Make sure to add the [s-modal-trigger="${s}"] attribute to your modal triggers.`);return}const o=e.querySelector(`[${w}]`);if(!o){console.error(`Socks UI: Modal ${s} is missing a modal element. Please add an element with the [s-modal="element"] attribute to your modal wrapper.`);return}o.setAttribute("role","dialog"),o.setAttribute("aria-modal","true"),o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex","-1"),o.style.maxHeight="90vh",o.style.overflowY="auto";const i=e.querySelector(`[${v}]`);i?(i.id=`${s}-title`,o.setAttribute("aria-labelledby",i.id)):o.hasAttribute("aria-label")||console.error(`Socks UI: Modal ${s} is missing a title. Either add a title element with the [s-modal="title"] attribute or provide an aria-label attribute to the modal element.`);const d=e.querySelector(`[${E}]`),f=e.querySelectorAll(`[${k}]`);if(f.length===0){console.error(`Socks UI: Modal ${s} is missing a close button. Please add an element with the [s-modal="close"] attribute to your modal wrapper.`);return}gsap.set(e,{display:"none"});const a=gsap.timeline({paused:!0,onComplete:()=>{o.focus()}});a.set(e,{display:"flex"}),a.from(d,{duration:.2,opacity:0}),a.from(o,{duration:.2,scale:.95,opacity:0},"<");let l=null;const p=()=>{l=document.activeElement,o.setAttribute("aria-hidden","false"),a.play(),document.body.style.overflow="hidden",e.addEventListener("keydown",h);const t=new CustomEvent("modal-open",{detail:e});window.dispatchEvent(t)},n=()=>{o.setAttribute("aria-hidden","true"),a.reverse(),document.body.style.overflow="",e.removeEventListener("keydown",h),l==null||l.focus();const t=new CustomEvent("modal-close",{detail:e});window.dispatchEvent(t)};r={...r,[s]:{open:p,close:n}};const c=e.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])'),b=c[0],y=c[c.length-1];function h(t){t.key==="Tab"?t.shiftKey?document.activeElement===b&&(t.preventDefault(),y.focus()):document.activeElement===y&&(t.preventDefault(),b.focus()):t.key==="Escape"&&n()}m.forEach(t=>{t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-controls",s),t.setAttribute("aria-expanded","false"),t.addEventListener("click",p)}),f.forEach(t=>{t.setAttribute("aria-label","Close modal"),t.setAttribute("aria-controls",s),t.setAttribute("aria-expanded","true"),t.tagName!=="BUTTON"&&(t.setAttribute("role","button"),t.setAttribute("tabindex","0")),t.addEventListener("click",n)}),d&&d.addEventListener("click",n)}),window.socks={...window.socks,openModal:I,closeModal:M}})();
