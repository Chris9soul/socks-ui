"use strict";(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const w='s-modal="wrapper"',g='s-modal="root"',k='s-modal="overlay"',v='s-modal="title"',S='s-modal="close"',M="s-modal-trigger",L="s-manual",O="s-focus-on",m=document.querySelectorAll(`[${w}]`);if(m.length===0){console.error(`Socks UI: Couldn't find any modal wrappers. Make sure to add the [s-modal="wrapper"] attribute to your modal wrappers.`);return}let f={};m.forEach((t,$)=>{const o=t.getAttribute("id");if(!o){console.error(`Socks UI: Modal ${$} is missing an ID. Please provide an ID for your modal wrapper.`);return}const p=document.querySelectorAll(`[${M}=${o}]`),I=t.hasAttribute(L);if(p.length===0&&!I){console.error(`Socks UI: Couldn't find any triggers for modal ${o}. Make sure to add the [s-modal-trigger="${o}"] attribute to your modal triggers.`);return}const s=t.querySelector(`[${g}]`);if(!s){console.error(`Socks UI: Modal ${o} is missing a modal element. Please add an element with the [s-modal="element"] attribute to your modal wrapper.`);return}let n=s;const i=t.getAttribute(O)||null;if(i&&(n=s.querySelector(i),!n)){console.error(`Socks UI: Couldn't find the element with selector ${i} in modal ${o}. Make sure the element exists.`);return}s.setAttribute("role","dialog"),s.setAttribute("aria-modal","true"),s.setAttribute("aria-hidden","true"),s.setAttribute("tabindex","-1");const c=t.querySelector(`[${v}]`);c?(c.id=`${o}-title`,s.setAttribute("aria-labelledby",c.id)):s.hasAttribute("aria-label")||console.error(`Socks UI: Modal ${o} is missing a title. Either add a title element with the [s-modal="title"] attribute or provide an aria-label attribute to the modal element.`);const d=t.querySelector(`[${k}]`),b=t.querySelectorAll(`[${S}]`);if(b.length===0){console.error(`Socks UI: Modal ${o} is missing a close button. Please add an element with the [s-modal="close"] attribute to your modal wrapper.`);return}gsap.set(t,{display:"none"});const r=gsap.timeline({paused:!0,onComplete:()=>{n.focus()}});r.set(t,{display:"flex"}),r.from(d,{duration:.2,opacity:0}),r.from(s,{duration:.2,scale:.95,opacity:0},"<");let l=null;const A=()=>{l=document.activeElement,s.setAttribute("aria-hidden","false"),r.play(),document.body.style.overflow="hidden",t.addEventListener("keydown",E);const e=new CustomEvent("modal-open",{detail:t});window.dispatchEvent(e)},a=()=>{s.setAttribute("aria-hidden","true"),r.reverse(),document.body.style.overflow="",t.removeEventListener("keydown",E),l==null||l.focus();const e=new CustomEvent("modal-close",{detail:t});window.dispatchEvent(e)};f[o]={open:A,close:a};const u=t.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])'),y=u[0],h=u[u.length-1];function E(e){e.key==="Tab"?e.shiftKey?document.activeElement===y&&(e.preventDefault(),h.focus()):document.activeElement===h&&(e.preventDefault(),y.focus()):e.key==="Escape"&&a()}p.forEach(e=>{e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-controls",o),e.addEventListener("click",A)}),b.forEach(e=>{e.setAttribute("aria-label","Close modal"),e.setAttribute("aria-controls",o),e.tagName!=="BUTTON"&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0")),e.addEventListener("click",a)}),d&&d.addEventListener("click",a)}),window.socks={...window.socks,modals:f}})();
