"use strict";(function(){if(window.gsap===void 0){console.error("Socks UI: Couldn't find GSAP. Please make sure to include GSAP in your project before using Socks UI");return}const h='s-modal="wrapper"',E='s-modal="root"',w='s-modal="overlay"',v='s-modal="title"',g='s-modal="close"',k="s-modal-trigger",S="s-manual",c=document.querySelectorAll(`[${h}]`);if(c.length===0){console.error(`Socks UI: Couldn't find any modal wrappers. Make sure to add the [s-modal="wrapper"] attribute to your modal wrappers.`);return}let u={};c.forEach((t,M)=>{const o=t.getAttribute("id");if(!o){console.error(`Socks UI: Modal ${M} is missing an ID. Please provide an ID for your modal wrapper.`);return}const m=document.querySelectorAll(`[${k}=${o}]`),L=t.hasAttribute(S);if(m.length===0&&!L){console.error(`Socks UI: Couldn't find any triggers for modal ${o}. Make sure to add the [s-modal-trigger="${o}"] attribute to your modal triggers.`);return}const r=t.querySelector(`[${E}]`);if(!r){console.error(`Socks UI: Modal ${o} is missing a modal element. Please add an element with the [s-modal="element"] attribute to your modal wrapper.`);return}r.setAttribute("role","dialog"),r.setAttribute("aria-modal","true"),r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1");const i=t.querySelector(`[${v}]`);i?(i.id=`${o}-title`,r.setAttribute("aria-labelledby",i.id)):r.hasAttribute("aria-label")||console.error(`Socks UI: Modal ${o} is missing a title. Either add a title element with the [s-modal="title"] attribute or provide an aria-label attribute to the modal element.`);const n=t.querySelector(`[${w}]`),p=t.querySelectorAll(`[${g}]`);if(p.length===0){console.error(`Socks UI: Modal ${o} is missing a close button. Please add an element with the [s-modal="close"] attribute to your modal wrapper.`);return}gsap.set(t,{display:"none"});const s=gsap.timeline({paused:!0,onComplete:()=>{r.focus()}});s.set(t,{display:"flex"}),s.from(n,{duration:.2,opacity:0}),s.from(r,{duration:.2,scale:.95,opacity:0},"<");let a=null;const f=()=>{a=document.activeElement,r.setAttribute("aria-hidden","false"),s.play(),document.body.style.overflow="hidden",t.addEventListener("keydown",y);const e=new CustomEvent("modal-open",{detail:t});window.dispatchEvent(e)},l=()=>{r.setAttribute("aria-hidden","true"),s.reverse(),document.body.style.overflow="",t.removeEventListener("keydown",y),a==null||a.focus();const e=new CustomEvent("modal-close",{detail:t});window.dispatchEvent(e)};u[o]={open:f,close:l};const d=t.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])'),b=d[0],A=d[d.length-1];function y(e){e.key==="Tab"?e.shiftKey?document.activeElement===b&&(e.preventDefault(),A.focus()):document.activeElement===A&&(e.preventDefault(),b.focus()):e.key==="Escape"&&l()}m.forEach(e=>{e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-controls",o),e.setAttribute("aria-expanded","false"),e.addEventListener("click",f)}),p.forEach(e=>{e.setAttribute("aria-label","Close modal"),e.setAttribute("aria-controls",o),e.setAttribute("aria-expanded","true"),e.tagName!=="BUTTON"&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0")),e.addEventListener("click",l)}),n&&n.addEventListener("click",l)}),window.socks={...window.socks,modals:u}})();
